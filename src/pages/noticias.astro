---
import fs from 'fs';
import path from 'path';
import Layout from '../layouts/Layout.astro';

const rawData = fs.readFileSync(path.resolve('./news.json'));
const { news } = JSON.parse(rawData);
---

<Layout title="Noticias – Pasaporte Digital de Producto">
  <h1>Últimas noticias</h1>

  {news.map(n => (
    <div class="card" key={n.link}>
      <a href={n.link} class="card-title" target="_blank" rel="noopener noreferrer">{n.titleES}</a>
      <div class="meta">{new Date(n.pubDate).toLocaleDateString('es-ES')}</div>
      <div class="tag">{n.tag}</div>
      {n.summary && (
        <div class="summary">{n.summary}</div>
      )}
    </div>
  ))}
</Layout>
